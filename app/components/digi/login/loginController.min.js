angular.module("altairApp").controller("newnetaLoginCtrl",function($scope,$rootScope,utils,$cookies,$log,$location,CommonService,SecurityModuleFactory,NotificationService,md5,SessionConstruct,$timeout,$window){$cookies.put("isAuthenticated",!1),$scope.errormessage=void 0,$scope.login_username="",$scope.login_password="",$scope.registerFormActive=!1,$scope.$on("someEvent",function(event,mass){}),$scope.closed=function(){UIkit.modal("#mymodal2").hide()},$scope.loginButton=function(){if(void 0==$scope.login_username||""==$scope.login_username)NotificationService.setWarningMessage("Username is required");else if(void 0==$scope.login_password||""==$scope.login_password)NotificationService.setWarningMessage("Password is required");else{var pass=$scope.login_password,success_login=function(data){if(1==data.success){var token=data.token,decoded=jwt_decode(token);$scope.roles=decoded.roles,localStorage.setItem("roles",JSON.stringify($scope.roles)),"cus"!=$scope.roles?(CommonService.SetData("menuSideBar",data),localStorage.setItem("menuSideBar",JSON.stringify(data)),SessionConstruct.init(),$location.path("/dashboard1"),localStorage.setItem("data_user_employee",JSON.stringify(data)),$cookies.put("isAuthenticated",1),$cookies.put("username",$scope.login_username)):NotificationService.setWarningMessage("Not Allowed")}else NotificationService.setWarningMessage(data.message)},error_login=function(data){};SecurityModuleFactory.login($scope.login_username,pass).then(success_login,error_login)}},$scope.loginButton1=function(){"/asset/management/:id"==$rootScope.returnToState?$location.path("/asset/management/"+$rootScope.returnToStateParams):$location.path("/dashboard1")};var $login_card=$("#login_card"),$login_form=$("#login_form"),$login_help=$("#login_help"),$register_form=$("#register_form"),$login_password_reset=$("#login_password_reset"),login_form_show=function(){$login_form.show().siblings().hide()},register_form_show=function(){$register_form.show().siblings().hide()},login_help_show=function(){$login_help.show().siblings().hide()},password_reset_show=function(){$login_password_reset.show().siblings().hide()};$scope.loginHelp=function($event){$event.preventDefault(),utils.card_show_hide($login_card,void 0,login_help_show,void 0)},$scope.backToLogin=function($event){$event.preventDefault(),$scope.registerFormActive=!1,utils.card_show_hide($login_card,void 0,login_form_show,void 0)},$scope.registerForm=function($event){$event.preventDefault(),$scope.registerFormActive=!0,utils.card_show_hide($login_card,void 0,register_form_show,void 0)},$scope.passwordReset=function($event){$event.preventDefault(),utils.card_show_hide($login_card,void 0,password_reset_show,void 0)}});