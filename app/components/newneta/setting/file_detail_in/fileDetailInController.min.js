angular.module("altairApp").controller("fileDetailInCtrl",function($rootScope,$scope,$interval,$timeout,$compile,$log,ReconstructMenu,FileDetailInputProcess,$filter){function RefreshData(){$scope.selectedData={},$scope.show.main=!0,$scope.show.detail=!1,$scope.show.edit=!1}ReconstructMenu.Init(),$scope.dataListInputAll=[],$scope.selectedData={},$scope.show={main:!0,detail:!1,edit:!1};var success_get_data=function(data){$scope.dataListInputAll=data},error_get_data=function(data){$log.error("data : "+data,data)};$timeout(function(){FileDetailInputProcess.GetListData().then(success_get_data,error_get_data)},500),$scope.showDetail=function(data){$scope.selectedData=data,$scope.show.main=!1,$scope.show.detail=!0,$scope.show.edit=!1},$scope.back=function(){RefreshData()},$scope.editDetail=function(data){$scope.show.main=!1,$scope.show.detail=!1,$scope.show.edit=!0,$scope.selectedData=data},$scope.RemoveData=function(item){var index=$scope.selectedData.path.indexOf(item);$scope.selectedData.path.splice(index,1)},$scope.AddData=function(item){angular.isUndefined($filter("filter")($scope.selectedData.path,item)[0])&&$scope.selectedData.path.push(item)},$scope.saveData=function(){var success_edit=function(data){FileDetailInputProcess.GetListData().then(success_get_data,error_get_data),UIkit.modal.alert("Update Success!"),RefreshData()},error_edit=function(data){$log.error("Error When update, message : "+JSON.stringify(data)),UIkit.modal.alert("Update Error!")};FileDetailInputProcess.UpdateData($scope.selectedData).then(success_edit,error_edit)}}).factory("FileDetailInputProcess",function($timeout,$log,$http,ServerConfig,$q){var service={},agent_process={method:"GET",url:ServerConfig.production+"/neta/wifiid/search/file_detail_input_all",headers:{}};service.GetListData=function(){var deffered=$q.defer();return $http(agent_process).success(function(data,status,headers){deffered.resolve(data)}).error(function(data,status){$log.error(status)}),deffered.promise};var update_data={method:"POST",url:ServerConfig.production+"/neta/wifiid/update/file_detail_input",data:{},headers:{}};return service.UpdateData=function(data){var deffered=$q.defer();return update_data.data=data,$http(update_data).success(function(data,status,headers){deffered.resolve(data)}).error(function(data,status){$log.error(status)}),deffered.promise},service});